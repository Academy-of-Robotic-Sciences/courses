<!--
author:   Robot Campus Team
email:    contact@academy-of-robotic-sciences.github.io
version:  2.0.0
language: en
narrator: US English Female

comment:  Electronics Fundamentals for Robotics: A comprehensive 6-hour academic course covering circuit theory, power systems, signal processing, and sensor integration. This course provides rigorous treatment of the electrical and electronic principles essential for robot design and implementation.


mode:     Textbook

link:     https://raw.githubusercontent.com/Academy-of-Robotic-Sciences/courses/main/course-styles.css

-->

# Electronics Fundamentals for Robotics

--{{0}}--
This comprehensive academic course provides foundational knowledge in electronics theory and practice for robotics applications. Students will develop rigorous understanding of circuit analysis, power distribution, analog and digital signal processing, and sensor integration.

**Course Code**: RC-105
**Duration**: 6 hours
**Level**: Undergraduate foundation
**Prerequisites**: Basic mathematics (algebra), RC-104 (Physics Foundations) recommended

## Learning Objectives

By completing this course, students will:

1. Apply circuit analysis principles including Ohm's Law, Kirchhoff's Laws, and Thévenin's theorem to robot electrical systems
2. Analyze and design power distribution systems for multi-component robotic platforms
3. Distinguish between analog and digital signal processing and select appropriate sensors for robotic applications
4. Evaluate sensor characteristics including resolution, accuracy, bandwidth, and noise considerations
5. Design signal conditioning circuits for sensor integration in embedded systems
6. Apply electromagnetic compatibility (EMC) principles to robot electrical design

---

## Module 1: Circuit Theory Fundamentals

--{{0}}--
This module establishes the theoretical foundation of electric circuit analysis, covering fundamental laws and circuit elements essential for understanding robot electrical systems.

### 1.1 Electric Circuit Fundamentals

<!-- class="theory-concept" -->
**Electric Charge and Current**

Electric current is the flow of electric charge through a conductor. The fundamental relationship is:

**I = dQ/dt**

where:
- **I** is current measured in amperes (A)
- **Q** is charge measured in coulombs (C)
- **t** is time measured in seconds (s)

One ampere represents the flow of one coulomb of charge per second. In metallic conductors, current consists of electron flow in the direction opposite to conventional current.

<!-- class="historical-note" -->
**Historical Development of Current Theory**

André-Marie Ampère (1775-1836) established the mathematical foundation of electrodynamics through his experimental work relating electric current to magnetic fields. His work predated the electron's discovery by J.J. Thomson in 1897, which explained current as electron flow. The convention of positive current flow from positive to negative terminals, established before the electron's discovery, persists in modern circuit analysis.

<!-- class="theory-concept" -->
**Voltage and Electric Potential**

Voltage is the electric potential difference between two points in a circuit:

**V = dW/dQ**

where:
- **V** is voltage measured in volts (V)
- **W** is work or energy measured in joules (J)
- **Q** is charge measured in coulombs (C)

One volt represents the potential difference when one joule of work moves one coulomb of charge. Voltage can be understood as electric potential energy per unit charge, analogous to gravitational potential energy.

<!-- class="theory-concept" -->
**Resistance and Ohm's Law**

Resistance quantifies opposition to current flow in a conductor. Georg Simon Ohm discovered the linear relationship between voltage, current, and resistance:

**V = IR**

where:
- **V** is voltage across the resistor (V)
- **I** is current through the resistor (A)
- **R** is resistance measured in ohms (Ω)

Resistance depends on material properties and geometry:

**R = ρL/A**

where:
- **ρ** (rho) is resistivity in ohm-meters (Ω·m)
- **L** is conductor length (m)
- **A** is cross-sectional area (m²)

<!-- class="alternative-approach" -->
**Conductance Formulation**

In some circuit analysis contexts, particularly in network theory and VLSI design, conductance provides a more natural formulation:

**G = 1/R** (measured in siemens, S)

Using conductance, Ohm's Law becomes:

**I = GV**

This formulation proves advantageous in parallel circuit analysis and when using nodal analysis methods.

### 1.2 Kirchhoff's Circuit Laws

<!-- class="theory-concept" -->
**Kirchhoff's Current Law (KCL)**

Kirchhoff's Current Law states that the algebraic sum of currents entering any node equals zero:

**∑ Iₙ = 0**

This law follows from conservation of electric charge. At any circuit node, the total charge entering must equal the total charge leaving, as charge cannot accumulate at a point.

Alternative formulation: The sum of currents entering a node equals the sum of currents leaving:

**∑ Iᵢₙ = ∑ Iₒᵤₜ**

<!-- class="theory-concept" -->
**Kirchhoff's Voltage Law (KVL)**

Kirchhoff's Voltage Law states that the algebraic sum of voltages around any closed loop equals zero:

**∑ Vₙ = 0**

This law follows from conservation of energy. The work required to move a charge around a closed path must be zero, as electric potential is a state function.

<!-- class="historical-note" -->
**Gustav Kirchhoff's Contributions**

Gustav Kirchhoff (1824-1887) formulated these circuit laws in 1845 as a young physicist. His laws generalized Ohm's work to complex networks. Kirchhoff later made fundamental contributions to spectroscopy and blackbody radiation theory, influencing the development of quantum mechanics.

### 1.3 Circuit Analysis Methods

<!-- class="theory-concept" -->
**Series and Parallel Circuits**

In series circuits, components share the same current:
- Total resistance: **Rₜₒₜₐₗ = R₁ + R₂ + ... + Rₙ**
- Voltage divider: **Vᵢ = (Rᵢ/Rₜₒₜₐₗ) × Vₛₒᵤᵣcₑ**

In parallel circuits, components share the same voltage:
- Total resistance: **1/Rₜₒₜₐₗ = 1/R₁ + 1/R₂ + ... + 1/Rₙ**
- Current divider: **Iᵢ = (Rₜₒₜₐₗ/Rᵢ) × Iₛₒᵤᵣcₑ**

For parallel resistors: **Rₜₒₜₐₗ = (R₁ × R₂)/(R₁ + R₂)** (two resistors)

<!-- class="theory-concept" -->
**Thévenin and Norton Equivalents**

Any linear two-terminal network can be replaced by an equivalent circuit:

**Thévenin equivalent**: Voltage source **Vₜₕ** in series with resistance **Rₜₕ**
- **Vₜₕ** = open-circuit voltage across terminals
- **Rₜₕ** = resistance seen from terminals with all sources deactivated

**Norton equivalent**: Current source **Iₙ** in parallel with resistance **Rₙ**
- **Iₙ** = short-circuit current through terminals
- **Rₙ = Rₜₕ**

The relationship between equivalents: **Vₜₕ = Iₙ × Rₙ**

These theorems simplify analysis of complex circuits by reducing them to simple equivalent forms.

### 1.4 Power and Energy in Circuits

<!-- class="theory-concept" -->
**Electric Power**

Power is the rate of energy transfer or conversion:

**P = VI = I²R = V²/R**

where:
- **P** is power measured in watts (W)
- **V** is voltage (V)
- **I** is current (A)
- **R** is resistance (Ω)

Energy dissipated over time:

**E = P × t = ∫P(t)dt**

In resistive elements, electrical energy converts to heat through Joule heating.

<!-- class="theory-concept" -->
**Maximum Power Transfer Theorem**

Maximum power transfer from source to load occurs when load resistance equals source internal resistance:

**Rₗₒₐd = Rₛₒᵤᵣcₑ**

Under this condition:
- Power delivered to load: **Pₘₐₓ = Vₛₒᵤᵣcₑ²/(4Rₛₒᵤᵣcₑ)**
- Efficiency: 50% (half the power dissipated in source resistance)

In robotics, impedance matching considerations apply to motor drive circuits, sensor interfaces, and RF communication systems.

**Quiz: Circuit Theory**

What is the voltage drop across a 220Ω resistor carrying 20mA of current?

[( )] 2.2V
[( )] 11V
[(X)] 4.4V
[( )] 22V
***
<div>
Using Ohm's Law: V = IR = 0.020A × 220Ω = 4.4V
</div>
***

Three resistors of 10Ω, 20Ω, and 30Ω are connected in series. What is the total resistance?

[( )] 5.45Ω
[( )] 20Ω
[(X)] 60Ω
[( )] 600Ω
***
<div>
For series resistors: Rₜₒₜₐₗ = R₁ + R₂ + R₃ = 10 + 20 + 30 = 60Ω
</div>
***

---

## Module 2: Electronic Components and Devices

--{{0}}--
This module examines the characteristics and applications of fundamental electronic components used in robotic systems.

### 2.1 Passive Components

<!-- class="theory-concept" -->
**Resistors**

Resistors limit current flow and divide voltage. Key parameters include:

- **Resistance value** (Ω): Nominal resistance
- **Tolerance**: Variation from nominal value (±1%, ±5%, etc.)
- **Power rating** (W): Maximum power dissipation without failure
- **Temperature coefficient** (ppm/°C): Resistance change per degree

Common resistor types:
- **Carbon composition**: General purpose, high tolerance
- **Metal film**: Precision, low noise, low temperature coefficient
- **Wire-wound**: High power, low resistance values
- **Surface mount (SMD)**: Compact, automated assembly

Color code for through-hole resistors encodes resistance value and tolerance.

<!-- class="theory-concept" -->
**Capacitors**

Capacitors store energy in an electric field. The fundamental relationship:

**Q = CV**

where:
- **Q** is stored charge (C)
- **C** is capacitance measured in farads (F)
- **V** is voltage across capacitor (V)

Current-voltage relationship:

**I = C(dV/dt)**

Capacitors block DC and pass AC, with reactance:

**Xc = 1/(2πfC)**

In robotics applications:
- Power supply decoupling and filtering
- Timing circuits
- Energy storage for actuators
- Signal coupling and filtering

<!-- class="theory-concept" -->
**Inductors**

Inductors store energy in a magnetic field:

**V = L(dI/dt)**

where:
- **L** is inductance measured in henries (H)
- **I** is current through inductor (A)

Inductive reactance:

**Xₗ = 2πfL**

Robot applications include:
- Motor driver circuits (back-EMF protection)
- Power supply filtering
- Electromagnetic actuators
- Wireless power transfer coils

### 2.2 Semiconductor Devices

<!-- class="theory-concept" -->
**Diodes**

Diodes allow current flow in one direction only. The Shockley diode equation describes current-voltage characteristics:

**I = Iₛ(e^(V/(nVₜ)) - 1)**

where:
- **Iₛ** is reverse saturation current
- **V** is voltage across diode
- **n** is ideality factor (1-2)
- **Vₜ** is thermal voltage (≈26mV at 300K)

Practical approximations:
- Forward bias: Conducts above threshold voltage (≈0.7V for silicon, ≈0.3V for Schottky)
- Reverse bias: Blocks current (small leakage)

Diode types in robotics:
- **Rectifier diodes**: AC-DC conversion
- **Schottky diodes**: Low forward drop, fast switching
- **Zener diodes**: Voltage regulation and protection
- **LEDs**: Status indication, optical sensing, communication

<!-- class="theory-concept" -->
**Transistors as Switches**

In digital applications, transistors operate in saturation (ON) or cutoff (OFF) modes.

**Bipolar Junction Transistor (BJT)**:
- NPN: Collector current flows when base-emitter voltage exceeds ≈0.7V
- Saturation: **Vcₑ** ≈ 0.2V, **Ic** = βIb (β = current gain, typically 50-200)
- Cutoff: **Ib** = 0, **Ic** ≈ 0

**Metal-Oxide-Semiconductor Field-Effect Transistor (MOSFET)**:
- N-channel: Drain current flows when gate-source voltage exceeds threshold **Vₜₕ** (2-4V)
- ON resistance **Rdₛ(ₒₙ)**: Typically 0.01-1Ω for power MOSFETs
- OFF state: Essentially zero drain current (nA leakage)

MOSFETs dominate modern robot electronics due to:
- Voltage-controlled (high input impedance)
- Low ON resistance (high efficiency)
- Fast switching speeds
- Robust and reliable

### 2.3 Light-Emitting Diodes (LEDs)

<!-- class="theory-concept" -->
**LED Operating Principles**

LEDs emit photons through electroluminescence when electrons recombine with holes in a semiconductor junction. Photon energy:

**E = hf = hc/λ**

where:
- **h** is Planck's constant (6.626 × 10⁻³⁴ J·s)
- **f** is frequency (Hz)
- **c** is speed of light (3 × 10⁸ m/s)
- **λ** is wavelength (m)

The semiconductor bandgap determines emission wavelength:
- Red: 620-700nm (1.8-2.0V forward voltage)
- Green: 520-550nm (2.0-3.5V)
- Blue: 450-480nm (3.0-3.6V)
- White: Blue LED with phosphor coating

<!-- class="theory-concept" -->
**LED Circuit Design**

LEDs require current limiting to prevent destruction. Basic circuit analysis:

**Rₗᵢₘᵢₜ = (Vₛᵤₚₚₗy - Vf) / Iₗₑd**

where:
- **Vₛᵤₚₚₗy** is supply voltage
- **Vf** is LED forward voltage
- **Iₗₑd** is desired LED current (typically 10-20mA for indicators)

Example: 5V supply, red LED (Vf = 2.0V), 15mA:
**R = (5V - 2V) / 0.015A = 200Ω** → Use standard 220Ω resistor

Power dissipation in resistor:
**P = I²R = (0.015)² × 220 = 0.0495W** → 1/8W resistor sufficient

<!-- class="alternative-approach" -->
**Current Source LED Drive**

For constant brightness independent of supply voltage variations, use constant current sources:
- Linear current regulators (LM317 in current mode)
- Switching current regulators (more efficient)
- Current mirror circuits (integrated LED drivers)

This approach is essential for:
- High-power LEDs requiring precise current control
- LED displays requiring uniform brightness
- Applications with variable supply voltage

**Quiz: Electronic Components**

An LED with 2.2V forward voltage needs to be driven at 20mA from a 5V supply. What resistor value is required?

[( )] 110Ω
[(X)] 140Ω
[( )] 220Ω
[( )] 260Ω
***
<div>
R = (5V - 2.2V) / 0.020A = 2.8V / 0.020A = 140Ω (use standard 150Ω value)
</div>
***

---

## Module 3: Power Systems for Robotics

--{{0}}--
This module addresses the design and analysis of electrical power distribution systems for mobile and stationary robotic platforms.

### 3.1 Battery Technology and Characteristics

<!-- class="theory-concept" -->
**Electrochemical Energy Storage**

Batteries convert chemical energy to electrical energy through redox reactions. Key parameters:

**Capacity** (Q): Total charge available, measured in ampere-hours (Ah) or milliampere-hours (mAh)
- Relationship: **Q = ∫I(t)dt** over discharge time

**Energy** (E): Total energy stored, measured in watt-hours (Wh)
- **E = V × Q** where V is average voltage

**C-rate**: Discharge/charge rate relative to capacity
- 1C rate discharges battery in 1 hour
- 0.5C rate discharges in 2 hours
- 2C rate discharges in 30 minutes

**State of Charge (SoC)**: Percentage of remaining capacity (0-100%)

**Depth of Discharge (DoD)**: Percentage of capacity depleted
- **DoD = 100% - SoC**

<!-- class="theory-concept" -->
**Common Battery Chemistries**

**Lithium Polymer (LiPo)**:
- Nominal voltage: 3.7V per cell
- Voltage range: 3.0V (empty) to 4.2V (full)
- High energy density: 150-250 Wh/kg
- High discharge rates: 10-50C continuous
- Requires protection circuitry (over-charge, over-discharge, over-current)
- Dominant in mobile robotics

**Lithium-Ion (Li-ion)**:
- Similar characteristics to LiPo
- Cylindrical or prismatic cells
- Better long-term stability
- Common formats: 18650, 21700 cells

**Nickel-Metal Hydride (NiMH)**:
- Nominal voltage: 1.2V per cell
- Lower energy density than lithium
- More robust and safer
- Common in consumer products and entry-level robots

**Lead-Acid**:
- Nominal voltage: 2V per cell (6V, 12V common configurations)
- Low energy density: 30-50 Wh/kg
- High current capability
- Inexpensive and robust
- Used in stationary/industrial robots

<!-- class="alternative-approach" -->
**Supercapacitors and Hybrid Systems**

Supercapacitors (ultracapacitors) provide:
- Very high power density
- Fast charge/discharge
- Long cycle life (>1 million cycles)
- Low energy density compared to batteries

Hybrid systems combine batteries (energy) with supercapacitors (power) for:
- Peak power demands (acceleration, jumping)
- Regenerative braking energy capture
- Extended battery lifetime through reduced peak loads

### 3.2 Voltage Regulation

<!-- class="theory-concept" -->
**Linear Voltage Regulators**

Linear regulators maintain constant output voltage by dissipating excess power:

**Vₒᵤₜ = Vᵢₙ - Vdᵣₒₚ**

Power dissipation:
**Pdᵢₛₛ = (Vᵢₙ - Vₒᵤₜ) × Iₒᵤₜ**

Efficiency:
**η = Vₒᵤₜ/Vᵢₙ × 100%**

**Example**: 7805 regulator (5V output from 12V input, 500mA load)
- **Pdᵢₛₛ** = (12V - 5V) × 0.5A = 3.5W
- **η** = 5V/12V = 41.7%

Linear regulators require:
- Heat sink for power dissipation
- Input voltage > output voltage + dropout voltage
- Simple circuit (few external components)

Applications in robotics:
- Low-power microcontroller supplies
- Analog sensor supplies requiring low noise
- Post-regulation after switching converter

<!-- class="theory-concept" -->
**Switching Voltage Regulators**

Switching regulators use energy storage elements (inductors, capacitors) and high-frequency switching to achieve high efficiency:

**Buck converter** (step-down):
**Vₒᵤₜ = D × Vᵢₙ**

where D is duty cycle (0-1)

**Boost converter** (step-up):
**Vₒᵤₜ = Vᵢₙ / (1 - D)**

**Buck-boost converter**:
**Vₒᵤₜ = -D/(1-D) × Vᵢₙ** (inverting)

Typical efficiency: 85-95%

Switching regulator considerations:
- Higher efficiency (less heat)
- More complex design
- Electromagnetic interference (EMI) generation
- Output voltage ripple (requires filtering)
- Can step up or down voltage

### 3.3 Power Distribution Architecture

<!-- class="theory-concept" -->
**Multi-Rail Power Systems**

Robotic systems typically require multiple voltage rails:

- **High voltage rail** (12V, 24V, 48V): Motors, actuators, high-power devices
- **Logic voltage** (5V, 3.3V): Microcontrollers, digital ICs
- **Analog voltage** (5V, ±15V): Sensor interfaces, operational amplifiers
- **Communication voltage** (3.3V, 1.8V): Wireless modules, interfaces

Power distribution strategies:
1. **Centralized**: Single battery → multiple regulators → loads
2. **Distributed**: Single battery → high-voltage distribution → local regulators near loads
3. **Hierarchical**: Multiple batteries for different subsystems

<!-- class="theory-concept" -->
**Protection and Safety**

**Overcurrent Protection**:
- **Fuses**: One-time protection, rated by current and breaking capacity
- **Resettable fuses (PTC)**: Polymer-based, automatic reset
- **Circuit breakers**: Manual reset, suitable for high currents

**Overvoltage Protection**:
- **Zener diodes**: Clamp voltage to safe level
- **Transient voltage suppressors (TVS)**: Fast transient protection
- **Varistors (MOV)**: High-energy surge protection

**Reverse Polarity Protection**:
- **Series diode**: Simple, causes voltage drop (0.3-0.7V)
- **P-channel MOSFET**: Low voltage drop, higher cost
- **Bridge rectifier**: Automatic polarity correction

**Thermal Management**:
- Heat sink design: **Rₜₕ = (Tⱼ - Tₐ) / Pdᵢₛₛ**
- Active cooling (fans) for high-power systems
- Temperature monitoring and shutdown

<!-- class="historical-note" -->
**Evolution of Power Electronics**

Power electronics advanced significantly with semiconductor development:
- 1950s: Silicon power rectifiers
- 1960s: Thyristors (SCRs) for motor control
- 1970s: Power transistors and early switching regulators
- 1980s: Power MOSFETs enabling high-frequency switching
- 1990s: IGBTs for high-power applications
- 2000s: Wide-bandgap semiconductors (SiC, GaN) enabling higher efficiency and frequency

Modern robot power systems leverage these advances for compact, efficient, and reliable power delivery.

**Quiz: Power Systems**

A LiPo battery is rated at 2200mAh. At a 0.5C discharge rate, how long will it provide power?

[( )] 30 minutes
[( )] 1 hour
[(X)] 2 hours
[( )] 4 hours
***
<div>
0.5C rate means 0.5 × 2200mAh = 1100mA current. Time = Capacity/Current = 2200mAh / 1100mA = 2 hours.
</div>
***

A linear regulator with 12V input provides 5V output at 1A. What is the power dissipated as heat?

[( )] 5W
[(X)] 7W
[( )] 12W
[( )] 17W
***
<div>
Pdᵢₛₛ = (Vᵢₙ - Vₒᵤₜ) × I = (12V - 5V) × 1A = 7W
</div>
***

---

## Module 4: Analog and Digital Signals

--{{0}}--
This module distinguishes analog and digital signal representations and their implications for sensor interfacing and signal processing in robotic systems.

### 4.1 Signal Fundamentals

<!-- class="theory-concept" -->
**Analog Signals**

Analog signals are continuous in both time and amplitude. Mathematically:

**s(t)**: ℝ → ℝ (continuous time, continuous value)

Characteristics:
- Infinite precision (in theory)
- Susceptible to noise
- Requires analog processing (filtering, amplification)
- Direct physical quantity representation

Examples in robotics:
- Potentiometer position: 0-5V → 0-270° rotation
- Load cell force: 0-10V → 0-100N force
- Temperature sensor: -40 to +125°C → 0.1-5V

<!-- class="theory-concept" -->
**Digital Signals**

Digital signals are discrete in both time and amplitude:

**s[n]**: ℤ → {0, 1, 2, ..., 2^N - 1} (discrete time, quantized value)

Characteristics:
- Finite precision (quantization)
- Noise immunity (threshold detection)
- Allows digital processing (computation, filtering, communication)
- Can be transmitted and stored without degradation

Digital signal parameters:
- **Bit depth** (N): Resolution = 2^N levels
- **Sample rate** (fs): Samples per second (Hz)
- **Dynamic range**: Ratio of largest to smallest representable value

### 4.2 Analog-to-Digital Conversion (ADC)

<!-- class="theory-concept" -->
**ADC Operation and Characteristics**

Analog-to-Digital Converters transform continuous analog signals to discrete digital representations through sampling and quantization.

**Resolution**: Number of bits determines quantization levels
- N-bit ADC: 2^N levels
- Voltage resolution: **LSB = Vref / 2^N**

**Example**: 10-bit ADC, 5V reference
- Levels: 2^10 = 1024
- LSB = 5V / 1024 = 4.88mV

**Sampling Rate**: Determines how frequently analog signal is measured
- Nyquist theorem: **fs ≥ 2fmax** where fmax is highest frequency component
- Aliasing occurs when fs < 2fmax (false low-frequency artifacts)

**Quantization Error**: Error introduced by finite resolution
- Maximum error: ±½ LSB
- Signal-to-Quantization-Noise Ratio: **SQNR ≈ 6.02N + 1.76 dB**

**Common ADC Types**:
- **Successive Approximation Register (SAR)**: Medium speed, common in microcontrollers
- **Sigma-Delta (Δ-Σ)**: High resolution, lower speed, excellent for sensors
- **Flash**: Very fast, low resolution, power-hungry
- **Pipeline**: High speed, high resolution, complex

<!-- class="theory-concept" -->
**ADC Specifications**

Key specifications for robotics applications:

**Integral Non-Linearity (INL)**: Maximum deviation from ideal transfer function (measured in LSB)

**Differential Non-Linearity (DNL)**: Variation in step size between adjacent codes (measured in LSB)

**Signal-to-Noise Ratio (SNR)**: Ratio of signal power to noise power (dB)

**Effective Number of Bits (ENOB)**: Actual resolution considering noise and distortion
- **ENOB = (SNR - 1.76) / 6.02**

**Conversion Time**: Time required to complete one conversion (affects maximum sampling rate)

### 4.3 Digital-to-Analog Conversion (DAC)

<!-- class="theory-concept" -->
**DAC Principles**

Digital-to-Analog Converters reconstruct analog signals from digital codes:

**Vₒᵤₜ = Vref × (D / 2^N)**

where:
- **Vref** is reference voltage
- **D** is digital input code (0 to 2^N - 1)
- **N** is number of bits

**Common DAC architectures**:
- **R-2R ladder**: Simple, good accuracy
- **Binary-weighted**: Requires precision resistors
- **Current-steering**: High speed, used in video applications

**DAC Applications in Robotics**:
- Motor speed control (when PWM unsuitable)
- Actuator position commands
- Analog test signal generation
- Sensor calibration and biasing

### 4.4 Pulse Width Modulation (PWM)

<!-- class="theory-concept" -->
**PWM Fundamentals**

Pulse Width Modulation encodes analog values as digital pulse trains with varying duty cycle:

**Duty Cycle (D)**: Fraction of period in HIGH state
**D = Tₒₙ / T = Tₒₙ × f**

where:
- **Tₒₙ** is pulse ON time
- **T** is period
- **f** is frequency (1/T)

Average voltage:
**Vₐᵥg = D × Vₕᵢgₕ**

Example: 5V logic, 60% duty cycle
- **Vₐᵥg** = 0.6 × 5V = 3V

<!-- class="theory-concept" -->
**PWM Applications**

**Motor Speed Control**:
- Average voltage determines motor speed
- High frequency (>20kHz) prevents audible noise
- Efficient (minimal power loss in switch)

**LED Brightness Control**:
- Duty cycle controls perceived brightness
- Frequency >100Hz prevents visible flicker
- More efficient than resistive dimming

**Servo Motor Control**:
- Pulse width (not duty cycle) encodes position
- Typical: 1-2ms pulses, 50Hz repetition rate
- 1.5ms center, 1ms one extreme, 2ms other extreme

**PWM Filtering**:
- Low-pass RC filter recovers average voltage: **fc = 1/(2πRC)**
- Time constant: **τ = RC** (63% of final value after τ)
- Select fc << PWM frequency, fc >> desired signal bandwidth

<!-- class="alternative-approach" -->
**Delta-Sigma Modulation**

For high-resolution analog output from digital systems:
- Very high sample rate (MHz)
- 1-bit output (digital pin)
- Filtering recovers high-resolution analog signal
- Used in high-end audio DACs

Advantages over multi-bit PWM:
- Higher resolution without more output pins
- Better noise shaping
- Simpler hardware

**Quiz: Signals and Conversion**

A 12-bit ADC with 3.3V reference has what voltage resolution (LSB)?

[( )] 0.8mV
[(X)] 0.805mV
[( )] 3.3mV
[( )] 4.88mV
***
<div>
LSB = Vref / 2^N = 3.3V / 4096 = 0.805mV
</div>
***

A PWM signal at 10kHz with 70% duty cycle applied to a 5V motor produces what average voltage?

[( )] 1.5V
[( )] 3.0V
[(X)] 3.5V
[( )] 5.0V
***
<div>
Vₐᵥg = D × Vₕᵢgₕ = 0.7 × 5V = 3.5V
</div>
***

---

## Module 5: Sensors for Robotics

--{{0}}--
This module examines sensor technologies, operating principles, and interface requirements for robotic perception systems.

### 5.1 Sensor Classification and Characteristics

<!-- class="theory-concept" -->
**Sensor Categories**

Sensors transduce physical quantities into electrical signals. Classification schemes:

**By measured quantity**:
- Position/displacement (potentiometer, encoder, Hall effect)
- Velocity (tachometer, Doppler radar, optical flow)
- Acceleration/orientation (accelerometer, gyroscope, magnetometer)
- Force/torque (strain gauge, load cell, torque sensor)
- Proximity/distance (ultrasonic, infrared, lidar, Time-of-Flight)
- Vision (camera, structured light)
- Environmental (temperature, humidity, pressure, gas)

**By output signal**:
- Analog: Continuous voltage/current output
- Digital: Serial data (I²C, SPI, UART) or pulse output (encoder)

**By operating principle**:
- Active: Emit energy and measure reflection (ultrasonic, lidar)
- Passive: Measure ambient energy (camera, temperature sensor)

<!-- class="theory-concept" -->
**Sensor Performance Metrics**

**Range**: Minimum and maximum measurable values
- Limited by physics, electronics, or dynamic range

**Resolution**: Smallest detectable change in measured quantity
- May differ from precision or accuracy

**Accuracy**: Maximum difference between measured and true value
- Expressed as absolute value or percentage of range

**Precision**: Repeatability of measurements
- Standard deviation of repeated measurements

**Bandwidth**: Frequency range of measurable signals
- Limited by sensor physics or electronic interface
- -3dB cutoff frequency defines bandwidth

**Noise**: Random variations in output
- Thermal noise: **Vₙ = √(4kTRΔf)** (Johnson-Nyquist)
- Shot noise: Fundamental in current flow
- 1/f noise: Low-frequency noise in semiconductors

**Linearity**: Degree to which output is proportional to input
- Non-linearity: Maximum deviation from linear fit

**Hysteresis**: Difference in output for same input approached from different directions

### 5.2 Position and Displacement Sensors

<!-- class="theory-concept" -->
**Potentiometers**

Resistive position sensors provide voltage proportional to shaft angle or linear position:

**Output voltage**: **Vₒᵤₜ = (θ/θₘₐₓ) × Vcc**

where θ is shaft angle, θₘₐₓ is maximum rotation (typically 270-300°)

Advantages:
- Simple interface (analog voltage)
- Absolute position measurement
- Low cost

Disadvantages:
- Limited lifetime (mechanical wear)
- Limited resolution (resistive element granularity)
- Noise from contact resistance variation

<!-- class="theory-concept" -->
**Rotary Encoders**

Encoders provide digital position feedback through optical or magnetic pattern sensing.

**Incremental encoders**:
- Output: Two square waves in quadrature (A and B channels)
- Resolution: Pulses per revolution (PPR)
- Position calculation: **θ = (pulse_count / PPR) × 360°**
- Direction from phase relationship between A and B

Quadrature decoding:
- Count both edges of both channels: 4× resolution multiplication
- State machine: (A, B) → (0,0), (1,0), (1,1), (0,1), (0,0) for forward rotation

**Absolute encoders**:
- Output: Multi-bit digital code representing absolute position
- Gray code prevents ambiguous transitions
- No need for homing or initialization
- Higher cost than incremental

### 5.3 Proximity and Distance Sensors

<!-- class="theory-concept" -->
**Ultrasonic Sensors**

Ultrasonic sensors measure distance by timing sound wave reflections:

**Distance = (Time-of-Flight × Speed of Sound) / 2**

Speed of sound in air (approximation):
**v ≈ 331.3 + 0.606 × T** (m/s, where T is temperature in °C)

At 20°C: v ≈ 343 m/s

Typical operation:
1. Transmit ultrasonic pulse (40kHz, 8 cycles)
2. Measure time until echo received
3. Calculate distance: **d = (t × 343) / 2** meters

Characteristics:
- Range: 2cm to 4m typical
- Resolution: ~1cm
- Beam angle: 15-30° (relatively wide)
- Update rate: ~10-50 Hz
- Affected by temperature, humidity, air currents

Limitations:
- Minimum range (due to transmit pulse duration)
- Soft/angled surfaces may not reflect
- Multiple sensor interference

<!-- class="theory-concept" -->
**Infrared (IR) Proximity Sensors**

IR sensors detect reflected infrared light. Two common types:

**Sharp GP2Y0A-series (analog output)**:
- Output voltage varies with distance
- Non-linear response: **V ∝ 1/d** approximately
- Range: 10-150cm depending on model
- Fast response (<40ms)
- Compact and low power

Calibration required:
- Measure voltage at known distances
- Fit polynomial or lookup table: **d = f(V)**

**Digital IR sensors**:
- Binary output (object present/absent)
- Fixed detection threshold
- Used for line following, edge detection

<!-- class="theory-concept" -->
**Time-of-Flight (ToF) Sensors**

ToF sensors measure distance by timing light pulse reflections (typically infrared laser):

**Distance = (c × Time-of-Flight) / 2**

where c = 3 × 10⁸ m/s (speed of light)

Techniques:
- **Direct ToF**: Measure pulse travel time directly (requires ps timing)
- **Phase shift**: Measure phase difference of modulated light (MHz modulation)

Advantages over ultrasonic:
- Faster response (MHz vs. kHz)
- Narrower beam (better angular resolution)
- Longer range (10m+)
- Not affected by air conditions

Examples: VL53L0X, VL53L1X (STMicroelectronics) provide millimeter accuracy via I²C interface.

### 5.4 Inertial Measurement Units (IMUs)

<!-- class="theory-concept" -->
**Accelerometers**

Accelerometers measure proper acceleration (g-force) based on inertial mass deflection.

**Operating principle**: Proof mass attached to spring
- Deflection proportional to acceleration: **F = ma**
- Displacement measured capacitively or piezoelectrically

Output in g (1g = 9.81 m/s²)
- 3-axis: measures **a**ₓ, **a**y, **a**z

At rest, accelerometer measures gravity:
- Upright orientation: **a**z = +1g, **a**ₓ = **a**y = 0
- Tilted: gravity component on each axis

Tilt calculation (for static case):
- **pitch = atan2(aₓ, √(ay² + az²))**
- **roll = atan2(ay, √(aₓ² + az²))**

Integration for position:
- **v(t) = ∫a(t)dt** (velocity from acceleration)
- **x(t) = ∫v(t)dt** (position from velocity)
- Error accumulates (drift) due to integration of noise

<!-- class="theory-concept" -->
**Gyroscopes**

Gyroscopes measure angular velocity (rotation rate).

**MEMS gyroscopes**: Use Coriolis effect on vibrating proof mass
- Output: **ω**ₓ, **ω**y, **ω**z in °/s or rad/s

Orientation calculation:
- **θ(t) = θ₀ + ∫ω(t)dt**
- Drift accumulates due to bias and noise integration

**Complementary filtering**: Combine accelerometer (low-freq) and gyroscope (high-freq):
**θ = α(θₚᵣₑᵥ + ω×dt) + (1-α)(θₐcc)**

where α ≈ 0.98, combines short-term gyro accuracy with long-term accelerometer correctness.

<!-- class="theory-concept" -->
**Magnetometers and Sensor Fusion**

Magnetometers measure magnetic field strength (Earth's magnetic field for compass heading):
- 3-axis output: **B**ₓ, **B**y, **B**z
- Heading: **ψ = atan2(-By, Bₓ)** (corrected for tilt)

**9-axis IMU** (9-DoF): Combines accelerometer (3) + gyroscope (3) + magnetometer (3)

**Sensor fusion algorithms**:
- **Complementary filter**: Simple, low computational cost
- **Kalman filter**: Optimal for linear systems with Gaussian noise
- **Extended Kalman Filter (EKF)**: Non-linear system extension
- **Madgwick/Mahony filters**: Efficient orientation estimation

These algorithms provide:
- Accurate orientation (roll, pitch, yaw) as quaternion or Euler angles
- Reduced drift compared to single sensor
- Real-time performance on embedded systems

<!-- class="alternative-approach" -->
**Visual-Inertial Odometry**

Modern approach combines IMU with camera:
- IMU provides high-rate motion estimates
- Camera provides long-term accuracy and scale
- Tightly-coupled fusion in optimization framework
- Used in drones, AR/VR, autonomous vehicles

**Quiz: Sensors**

An ultrasonic sensor measures a time-of-flight of 5.83ms at 20°C. What is the distance to the object?

[( )] 0.5m
[(X)] 1.0m
[( )] 2.0m
[( )] 4.0m
***
<div>
Speed of sound ≈ 343 m/s at 20°C. Distance = (343 m/s × 0.00583s) / 2 = 1.0m
</div>
***

An accelerometer at rest reads aₓ=0g, ay=0.5g, az=0.866g. What is its tilt angle from horizontal?

[( )] 15°
[(X)] 30°
[( )] 45°
[( )] 60°
***
<div>
Total acceleration = 1g (at rest). The z-component is 0.866g = cos(30°), so the device is tilted 30° from horizontal.
</div>
***

---

## Module 6: Signal Conditioning and Interface Circuits

--{{0}}--
This module examines analog signal processing techniques for conditioning sensor signals prior to digitization or further processing.

### 6.1 Operational Amplifier Fundamentals

<!-- class="theory-concept" -->
**Operational Amplifier (Op-Amp) Theory**

Op-amps are high-gain differential amplifiers fundamental to analog signal processing.

**Ideal op-amp characteristics**:
- Infinite open-loop gain: **A** → ∞
- Infinite input impedance: **Zᵢₙ** → ∞
- Zero output impedance: **Zₒᵤₜ** = 0
- Infinite bandwidth
- Zero offset voltage

**Golden rules** (for negative feedback):
1. Input voltages are equal: **V₊ = V₋**
2. Input currents are zero: **I₊ = I₋ = 0**

These approximations enable straightforward circuit analysis.

<!-- class="theory-concept" -->
**Basic Op-Amp Configurations**

**Non-inverting amplifier**:
**Vₒᵤₜ = (1 + Rf/Rᵢₙ) × Vᵢₙ**

- Input impedance: Very high (determined by op-amp)
- Gain always ≥ 1
- Unity gain buffer: Rf = 0, Rᵢₙ = ∞ (omit resistors)

**Inverting amplifier**:
**Vₒᵤₜ = -(Rf/Rᵢₙ) × Vᵢₙ**

- Input impedance: **Rᵢₙ**
- Gain can be <1, =1, or >1
- Phase inversion (180° shift)
- Virtual ground at inverting input

**Differential amplifier**:
**Vₒᵤₜ = (Rf/Rᵢₙ) × (V₂ - V₁)**

- Amplifies difference between inputs
- Common-mode rejection: Rejects signals present on both inputs
- Used for sensor differential outputs, noise rejection

### 6.2 Signal Conditioning Techniques

<!-- class="theory-concept" -->
**Filtering**

Filters remove unwanted frequency components from signals.

**Low-pass filter** (attenuates high frequencies):
- Cutoff frequency: **fc = 1/(2πRC)** (1st order RC)
- Roll-off: 20dB/decade (1st order), 40dB/decade (2nd order)
- Application: Anti-aliasing before ADC, noise reduction

**High-pass filter** (attenuates low frequencies):
- Cutoff frequency: **fc = 1/(2πRC)**
- Application: Remove DC offset, AC coupling

**Band-pass filter** (passes specific frequency range):
- Combination of high-pass and low-pass
- Application: Extract specific signal frequency (e.g., 40kHz for ultrasonic)

**Active filters**: Use op-amps for gain, sharper roll-off, and no loading effects
- Sallen-Key topology: 2nd order with few components
- Multiple feedback: Better noise performance
- Higher-order: Cascade multiple stages

<!-- class="theory-concept" -->
**Amplification and Attenuation**

**Instrumentation amplifier**:
- Very high input impedance
- Very high CMRR (>100dB)
- Adjustable gain with single resistor
- Ideal for low-level sensor signals (strain gauges, thermocouples)

**Programmable gain amplifier (PGA)**:
- Digitally controlled gain
- Allows software adjustment of input range
- Used for auto-ranging measurement systems

**Voltage divider** (attenuation):
**Vₒᵤₜ = (R₂/(R₁ + R₂)) × Vᵢₙ**

- Simple attenuation for over-range signals
- Consider loading effects (use high-impedance buffer if needed)

<!-- class="theory-concept" -->
**Level Shifting and Offset Adjustment**

Many sensors output signals not centered at 0V or not compatible with ADC input range.

**Summing amplifier** (add DC offset):
**Vₒᵤₜ = -(Rf/R₁)V₁ - (Rf/R₂)V₂**

Can add DC reference to shift signal level.

**Differential amplifier with reference**:
Shift signal relative to reference voltage for single-supply operation.

Example: Shift ±1V signal to 0-3.3V range:
- Gain = 1.65
- Offset = 1.65V
- **Vₒᵤₜ** = 1.65 × **Vᵢₙ** + 1.65

### 6.3 Noise and Electromagnetic Compatibility

<!-- class="theory-concept" -->
**Noise Sources and Mitigation**

**Thermal noise** (Johnson-Nyquist noise):
**Vₙ = √(4kTRΔf)**

where:
- k = Boltzmann constant (1.38 × 10⁻²³ J/K)
- T = temperature (K)
- R = resistance (Ω)
- Δf = bandwidth (Hz)

Mitigation: Minimize bandwidth, use low-resistance circuits

**Shot noise** (current flow in semiconductors):
**Iₙ = √(2qIΔf)**

where q = electron charge (1.6 × 10⁻¹⁹ C)

**1/f noise** (flicker noise):
- Dominant at low frequencies (<1kHz)
- Mitigation: Chopper stabilization, AC coupling

**Environmental noise**:
- 50/60Hz power line interference
- Switching noise from power supplies, motors
- RF interference from wireless devices

<!-- class="theory-concept" -->
**Grounding and Shielding**

**Ground loops**: Different ground potentials create current flow
- Single-point grounding: All grounds connect to one point
- Star ground configuration for analog circuits
- Separate analog and digital grounds

**Shielding**: Conductive enclosure blocks electric fields
- Connect shield to ground at one point only
- Twisted pairs: Differential signals reject common-mode noise

**Filtering at entry points**:
- Ferrite beads: High-frequency filtering
- Capacitors: Bypass high-frequency noise to ground
- LC filters: Power supply noise rejection

<!-- class="alternative-approach" -->
**Optical Isolation**

For extreme noise immunity and safety:
- Optocouplers: LED + photodetector, no electrical connection
- Isolated ADCs: Digital isolators after conversion
- Isolated power supplies: Transformer-based DC-DC converters

Applications:
- Motor controller to microcontroller interface
- High-voltage measurement
- Medical device safety

**Quiz: Signal Conditioning**

An op-amp inverting amplifier has Rᵢₙ=10kΩ and Rf=100kΩ. What is the gain?

[( )] -1
[(X)] -10
[( )] -100
[( )] 10
***
<div>
Gain = -Rf/Rᵢₙ = -100kΩ/10kΩ = -10
</div>
***

A low-pass RC filter with R=1kΩ and C=1µF has what cutoff frequency?

[( )] 159Hz
[(X)] 159Hz
[( )] 1kHz
[( )] 1.59kHz
***
<div>
fc = 1/(2πRC) = 1/(2π × 1000 × 1×10⁻⁶) ≈ 159Hz
</div>
***

---

## Summary and Key Takeaways

This course has provided comprehensive theoretical foundation in electronics for robotics:

1. **Circuit Theory**: Ohm's Law, Kirchhoff's Laws, and circuit analysis methods form the basis for understanding all robot electrical systems

2. **Electronic Components**: Resistors, capacitors, semiconductors, and their characteristics determine circuit behavior and performance

3. **Power Systems**: Battery technology, voltage regulation, and power distribution architectures enable reliable robot operation

4. **Signals**: Understanding analog and digital signal representation, conversion, and PWM techniques is essential for sensor interfacing and control

5. **Sensors**: Knowledge of sensor operating principles, characteristics, and limitations enables proper sensor selection and integration

6. **Signal Conditioning**: Op-amp circuits, filtering, and noise mitigation techniques ensure accurate signal processing

These principles apply across all robotic systems, from small mobile robots to industrial manipulators and humanoid platforms.

---

## Optional Laboratory Exercises

The following optional laboratory exercises provide hands-on experience applying the theoretical concepts covered in this course. Each exercise is self-contained and can be completed independently.

---

### Laboratory 1: Circuit Analysis and Measurement

**Duration**: 90 minutes

**Objective**: Apply circuit theory to design, build, and analyze basic circuits using a breadboard and multimeter.

<!-- class="optional-exercise" -->
**Exercise 1.1: LED Circuit Design and Verification**

Design and build an LED circuit that operates from a 9V battery.

Requirements:
- Red LED with forward voltage Vf = 2.0V
- Target LED current: 15mA
- Calculate required series resistor value
- Build circuit on breadboard
- Measure actual voltage across LED and resistor
- Measure actual current through circuit
- Calculate actual resistance and compare to nominal value
- Explain any discrepancies

Questions:
1. What happens if you use a 100Ω resistor instead? (Calculate before testing)
2. How does LED brightness change with current? Test at 10mA, 15mA, and 20mA.
3. Why do we need the current-limiting resistor?

<!-- class="exercise-tip" -->
**Measurement Technique**: To measure current, break the circuit and insert multimeter in series. Set multimeter to mA range before connecting.

**Exercise 1.2: Voltage Divider**

Design a voltage divider to produce 3.3V from a 5V supply for a microcontroller.

Tasks:
1. Calculate required resistor ratio
2. Select actual resistor values (consider standard values: 1kΩ, 2.2kΩ, 3.3kΩ, 4.7kΩ, 10kΩ)
3. Build the divider and measure output voltage with no load
4. Connect a 1kΩ load and measure output voltage again
5. Explain why the voltage changed
6. Calculate the loading effect theoretically and compare

<!-- class="exercise-advanced" -->
**Advanced Challenge**: Design a voltage divider that maintains >3.2V output with any load resistance >100Ω. Calculate the maximum resistor values you can use.

---

### Laboratory 2: Power System Design

**Duration**: 120 minutes

**Objective**: Design and implement a multi-rail power distribution system with protection.

<!-- class="optional-exercise" -->
**Exercise 2.1: Linear Voltage Regulator**

Build a 5V regulated power supply using a 7805 voltage regulator.

Components:
- 7805 voltage regulator
- 9V or 12V DC input
- 100µF capacitor (input)
- 10µF capacitor (output)
- Heat sink (if available)

Tasks:
1. Identify the 7805 pins (IN, OUT, GND) using datasheet
2. Build the circuit with proper capacitor placement
3. Measure input and output voltages with no load
4. Calculate dropout voltage
5. Add 100Ω load and measure output voltage
6. Measure regulator temperature after 5 minutes
7. Calculate power dissipation and compare to measured temperature rise

<!-- class="exercise-tip" -->
**Safety Note**: The regulator can become hot under load. If temperature exceeds 60°C, remove power and add a heat sink.

**Exercise 2.2: Power Distribution Board**

Design a power distribution system for a robot with these components:
- Two DC motors (12V, 500mA each)
- Microcontroller (5V, 100mA)
- Two servos (5V, 300mA each)
- Sensor board (3.3V, 50mA)

Requirements:
- Input: 12V battery (3S LiPo, 11.1V nominal)
- Use 7805 for 5V rail
- Use LM1117-3.3 for 3.3V rail
- Include fuse protection on 12V rail
- Include reverse polarity protection

Tasks:
1. Draw complete circuit diagram
2. Calculate current requirements for each rail
3. Calculate power dissipation in each regulator
4. Select appropriate fuse rating
5. Design reverse polarity protection (compare diode vs. MOSFET approaches)
6. Build and test the distribution board

<!-- class="exercise-advanced" -->
**Advanced Challenge**: Replace the linear 5V regulator with a buck converter module (e.g., LM2596). Measure efficiency of both approaches under full load. Calculate heat dissipation and battery life extension.

---

### Laboratory 3: Sensor Integration

**Duration**: 120 minutes

**Objective**: Interface multiple sensors to a microcontroller and process sensor data.

<!-- class="optional-exercise" -->
**Exercise 3.1: Ultrasonic Distance Sensor**

Interface an HC-SR04 ultrasonic sensor to an Arduino.

Tasks:
1. Wire the sensor to Arduino (VCC, GND, Trig, Echo pins)
2. Implement the timing code to measure Time-of-Flight
3. Convert time to distance in centimeters
4. Display distance on Serial Monitor at 10Hz update rate
5. Calibrate accuracy by measuring known distances (10cm, 25cm, 50cm, 100cm)
6. Characterize minimum and maximum range
7. Test angular response by rotating sensor relative to target

Questions:
1. How does the update rate affect accuracy?
2. What happens when measuring highly angled or soft surfaces?
3. How could you improve accuracy for your application?

<!-- class="exercise-tip" -->
**Debugging Tip**: If readings are erratic, add a small delay (10µs) after setting Trig LOW and before setting it HIGH. Some sensor modules require this timing.

**Exercise 3.2: IMU Sensor Fusion**

Use an MPU-6050 or MPU-9250 IMU to measure orientation.

Tasks:
1. Connect IMU via I²C interface
2. Read raw accelerometer and gyroscope data
3. Calculate tilt angles (roll, pitch) from accelerometer
4. Integrate gyroscope to get orientation
5. Observe gyroscope drift over 60 seconds
6. Implement complementary filter combining both sensors
7. Compare filtered orientation to accelerometer-only and gyroscope-only

Complementary filter code structure:
```cpp
float alpha = 0.98;  // Filter coefficient
float dt = 0.01;     // Sample time (100Hz)

// Get sensor readings
float gyro_rate = read_gyroscope();  // °/s
float accel_angle = calculate_angle_from_accel();  // °

// Complementary filter
angle = alpha * (angle + gyro_rate * dt) + (1 - alpha) * accel_angle;
```

<!-- class="exercise-advanced" -->
**Advanced Challenge**: Implement a Kalman filter for sensor fusion. Compare performance to complementary filter in terms of noise rejection and dynamic response. Use a rotating platform or pendulum for testing.

**Exercise 3.3: Analog Sensor Calibration**

Interface a Sharp GP2Y0A21YK infrared distance sensor.

Tasks:
1. Connect sensor analog output to Arduino ADC
2. Measure voltage at 10cm, 20cm, 30cm, 40cm, 50cm distances
3. Plot voltage vs. distance
4. Fit a calibration curve: d = a × V⁻¹ + b
5. Implement calibration in code
6. Compare accuracy to ultrasonic sensor
7. Test response time with moving target

Questions:
1. Why is the response non-linear?
2. How does surface color/reflectivity affect readings?
3. When would you choose IR over ultrasonic?

---

### Laboratory 4: Signal Conditioning and Data Acquisition

**Duration**: 120 minutes

**Objective**: Design and implement signal conditioning circuits for sensor integration.

<!-- class="optional-exercise" -->
**Exercise 4.1: Amplifier Design**

Design an instrumentation amplifier for a strain gauge bridge sensor.

Sensor specifications:
- Output: ±10mV full scale
- Output impedance: 350Ω (bridge resistance)
- Required output: 0-5V for ADC

Tasks:
1. Calculate required gain
2. Calculate required offset (to shift ±10mV to 0-20mV range)
3. Design non-inverting amplifier stage (gain)
4. Design summing amplifier stage (offset)
5. Build and test with simulated sensor (voltage divider with potentiometer)
6. Measure gain accuracy
7. Measure noise floor with sensor inputs shorted

<!-- class="exercise-tip" -->
**Op-Amp Selection**: Use low-noise op-amps like TL072 or OP07 for precision measurements. Rail-to-rail op-amps like LM358 work well for single-supply applications.

**Exercise 4.2: Active Filtering**

Design an anti-aliasing filter for a vibration sensor.

Requirements:
- Sensor bandwidth: 0-1kHz
- ADC sample rate: 5kHz (Nyquist frequency: 2.5kHz)
- Filter cutoff: 2kHz
- Minimum attenuation at 5kHz: 40dB

Tasks:
1. Determine required filter order (2nd order = 40dB/decade)
2. Design Sallen-Key low-pass filter topology
3. Calculate component values for 2kHz cutoff
4. Build and test filter
5. Measure frequency response (10Hz to 10kHz) using function generator
6. Plot Bode magnitude plot (gain vs. frequency)
7. Verify cutoff frequency and roll-off rate

<!-- class="exercise-advanced" -->
**Advanced Challenge**: Design a 4th-order Butterworth filter for steeper roll-off. Compare passband flatness and phase response to 2nd-order filter. Consider effects on time-domain step response.

**Exercise 4.3: PWM to Analog Conversion**

Generate analog voltages using PWM and filtering.

Tasks:
1. Generate 1kHz PWM at 0%, 25%, 50%, 75%, 100% duty cycle
2. Measure PWM signal with oscilloscope
3. Design low-pass RC filter (fc = 10Hz)
4. Build filter and measure DC output voltage for each duty cycle
5. Measure ripple voltage (AC component)
6. Redesign filter for <10mV ripple
7. Compare to actual DAC output (if available)

Questions:
1. How does PWM frequency affect required filter?
2. What is the tradeoff between ripple and response time?
3. Calculate bit-resolution equivalent based on PWM timer resolution

---

## Further Study and Resources

### Recommended Textbooks

1. **Horowitz & Hill**: *The Art of Electronics* (3rd Edition)
   - Comprehensive practical electronics reference
   - Excellent treatment of op-amps, filters, and analog design

2. **Sedra & Smith**: *Microelectronic Circuits*
   - Rigorous theoretical foundation
   - Device physics and circuit analysis

3. **Scherz & Monk**: *Practical Electronics for Inventors*
   - Hands-on approach with many examples
   - Good for self-study

### Online Resources

- **All About Circuits**: Free online textbook covering basics through advanced topics
- **Electronics Tutorials**: Comprehensive circuit theory and design tutorials
- **TI Precision Labs**: Video series on op-amps, ADCs, and sensor interfacing
- **Analog Devices Tutorials**: Application notes and design guides

### Next Steps in Curriculum

- **RC-106**: Safety and Ethics in Robotics
- **Hardware Track**: PCB Design, Motor Control, Power Electronics
- **Software Track**: Embedded Systems Programming, Real-Time Operating Systems
- **Systems Track**: Robot System Architecture, Integration

---

**Course developed by Robot Campus Team**
Version 2.0.0 | Last updated: 2024
